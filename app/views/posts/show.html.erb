<h1><%= @post.title %></h1>
<img height=250 width=250 <%= image_tag(@post.main_image) if @post.main_image.attached? %> </img>
<p><%= @post.description %></p>
<p> Post created by:   <%= link_to @user.username, user_path(@user.id), method: :get %> </p>
<p><%= @post.created_at.strftime('%d %B %Y | %I:%M%P ') %></p>
<% if @post.user_id === current_user.id %>
<p><%= link_to 'Edit', edit_post_path(@post), method: :get %></p>
<p><%= button_to 'Delete', post_path(@post), :method => :delete, data: { confirm: "Are you sure?" }%> </p>
<% end %>
<script>
  geocode();

  function geocode() {
     var location = '4 selwyn gardens, Cambridge, Cambridgeshire';
     axios.get('https://maps.googleapis.com/maps/api/geocode/json', {
     params: {
       address: location,
       key: '<%= Rails.application.credentials.dig(:google, :google_api_key) %>'
     }
  })
  .then(function(response) {
    console.log(response)
    var latitude = response.data.results[0].geometry.location.lat;
    var longitude = response.data.results[0].geometry.location.lng;
    console.log(latitude);
    console.log(longitude);
  })
  .catch(function(error){
    console.log(error);
  });
}
</script>
