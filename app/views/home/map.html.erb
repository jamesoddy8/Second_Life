<div id='map'></div>


<script>
function initMap() {
   var markers = []
     <% @posts.each do |p| %>
       markers.push({lat: <%= p.latitude %>, lng: <%= p.longitude %>})
     <% end %>
    
    var myLocation = {lat: 51.50, lng: -0.11}
    var map = new google.maps.Map(
    document.getElementById('map'), {zoom: 7, center: myLocation});

  console.log(markers)

  for(i = 0; i < markers.length; i++ ) {
      var position = new google.maps.LatLng(markers[i].lat, markers[i].lng);
      marker = new google.maps.Marker({
          position: position,
          map: map
      })
  }
}
</script>
